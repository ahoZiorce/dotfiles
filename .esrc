#!/usr/bin/env es

profile_path = $home/etc/home.d/profile

if {~ $#_PROFILE_RUN 0} {
	exec sh -c '. $profile_path ; es -l'
}

fn alias name f {
	let (cmd = $f(1))
	catch @ e {
		echo 'Non-existent program' ; return 1
	} {
		let (real_path = <={%whatis $cmd})
		f = $real_path $f(2 ...)
	}
	fn-$name = @ { $f $* }
	return 0
}

fn ma { expr ( $* ) }

. $XDG_CONFIG_HOME/home.d/aliases.es

fn %prompt {
	prompt = \e'[0;35m'^<={%flatten ' ' `{p}}^\e'[0;315m ' '> '
}

if {{~ $TERM linux} && {~ `{tty} /dev/tty1}} { startx $XDG_CONFIG_HOME/xorg.d/xinitrc ; exit 0 }
